<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Tuff</title><meta name="description" content="This is a custom description"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Tuff</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>Tuff</h2></div>
<div class="tsd-panel tsd-typography"><p>Tuff is a <em>Typescript UI Frontend Framework</em>.
It is designed to create dynamic, client-side web applications driven by type-safe, declarative code.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>Tuff has <em>no dependencies</em> and can be integrated into any new or existing Typescript project. Just install <code>tuff-core</code> with your favorite package manager:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> </span><span class="hl-0">tuff</span><span class="hl-1">-</span><span class="hl-0">core</span>
</code></pre>
<p>or </p>
<pre><code><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-0">add</span><span class="hl-1"> </span><span class="hl-0">tuff</span><span class="hl-1">-</span><span class="hl-0">core</span>
</code></pre>

<a href="#parts" id="parts" style="color: inherit; text-decoration: none;">
  <h3>Parts</h3>
</a>
<p>The basic building blocks of Tuff applications are <strong>Parts</strong>.
A Part is similar to a class-based React component.
They&#39;re classes that inherit from the <code>Part</code> generic class and implement a <code>render()</code> method.</p>
<pre><code class="language-typescript"><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">CounterState</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">count</span><span class="hl-1">: </span><span class="hl-3">number</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">// each part is parameterized by a state type</span><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Counter</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">CounterState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">// the render method accepts an HTML builder object that lets the </span><br/><span class="hl-1">    </span><span class="hl-4">// part declaratively build the interface</span><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// the CounterState object passed to this part is </span><br/><span class="hl-1">        </span><span class="hl-4">// accessible as this.state</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">({</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">`Count: </span><span class="hl-2">${</span><span class="hl-2">this</span><span class="hl-7">.</span><span class="hl-0">state</span><span class="hl-7">.</span><span class="hl-0">count</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">})</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span>
</code></pre>

<a href="#declarative-ui" id="declarative-ui" style="color: inherit; text-decoration: none;">
  <h3>Declarative UI</h3>
</a>
<p>The argument of a Part&#39;s <code>render()</code> method is an HTML builder element where the part can build its UI.</p>
<p>On each builder element, you can pass zero to many arguments that are one of:</p>
<ol>
<li>A string containing CSS selector-style classes and/or an id, e.g. <code>&quot;.foo.bar#foo1&quot;</code> will generate <code>class=&quot;foo bar&quot; id=&quot;foo1&quot;</code></li>
<li>An object literal containing attributes (like <code>title</code>, <code>href</code>, <code>class</code>, etc.) and/or a <code>text</code> value that will populate the literal body of the element</li>
<li>A function that takes the element as an argument and allows you to specify children of the element in the function body</li>
</ol>
<p>The assignment of attributes from #2 is also exposed as methods on the element.</p>
<p>For example, this element declaration:</p>
<pre><code class="language-typescript"><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-0">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">div</span><span class="hl-1">(</span><span class="hl-6">&quot;.container&quot;</span><span class="hl-1">, </span><span class="hl-0">c</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">c</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">(</span><span class="hl-6">&quot;.value&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">         .</span><span class="hl-5">text</span><span class="hl-1">(</span><span class="hl-6">&quot;Hello&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">c</span><span class="hl-1">.</span><span class="hl-5">a</span><span class="hl-1">(</span><span class="hl-6">&quot;.link&quot;</span><span class="hl-1">, {</span><span class="hl-0">href:</span><span class="hl-1"> </span><span class="hl-6">&quot;#&quot;</span><span class="hl-1">, </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;Click Me&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">}</span>
</code></pre>
<p>will generate the following markup:</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">div</span><span class="hl-1"> </span><span class="hl-10">class</span><span class="hl-1">=</span><span class="hl-11">&quot;container&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-9">span</span><span class="hl-1"> </span><span class="hl-10">class</span><span class="hl-1">=</span><span class="hl-11">&quot;value&quot;</span><span class="hl-8">&gt;</span><span class="hl-1">Hello</span><span class="hl-8">&lt;/</span><span class="hl-9">span</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-9">a</span><span class="hl-1"> </span><span class="hl-10">class</span><span class="hl-1">=</span><span class="hl-11">&quot;link&quot;</span><span class="hl-1"> </span><span class="hl-10">href</span><span class="hl-1">=</span><span class="hl-11">&quot;#&quot;</span><span class="hl-8">&gt;</span><span class="hl-1">Click Me</span><span class="hl-8">&lt;/</span><span class="hl-9">a</span><span class="hl-8">&gt;</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">div</span><span class="hl-8">&gt;</span>
</code></pre>
<p>All attribute arguments are statically-typed and specific to the particular element (e.g. anchor tags can have an <code>href</code> attribute while input tags can have a <code>type</code> attribute, but not the other way around).</p>
<p>In addition to the proper HTML element attributes, you can assign arbitrary and nested data-attributes using the <code>.data()</code> method:</p>
<pre><code class="language-typescript"><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-0">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">a</span><span class="hl-1">(</span><span class="hl-6">&quot;.link&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-5">text</span><span class="hl-1">(</span><span class="hl-6">&quot;Click Me&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-5">data</span><span class="hl-1">({</span><span class="hl-0">foo:</span><span class="hl-1"> </span><span class="hl-6">&#39;bar&#39;</span><span class="hl-1">, </span><span class="hl-0">nested:</span><span class="hl-1"> {</span><span class="hl-0">hello:</span><span class="hl-1"> </span><span class="hl-6">&#39;world&#39;</span><span class="hl-1">}})</span><br/><span class="hl-1">}</span>
</code></pre>
<p>will generate:</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-9">a</span><span class="hl-1"> </span><span class="hl-10">class</span><span class="hl-1">=</span><span class="hl-11">&quot;link&quot;</span><span class="hl-1"> </span><span class="hl-10">data-foo</span><span class="hl-1">=</span><span class="hl-11">&quot;bar&quot;</span><span class="hl-1"> </span><span class="hl-10">data-nested-hello</span><span class="hl-1">=</span><span class="hl-11">&quot;world&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-1">        Click Me</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;/</span><span class="hl-9">a</span><span class="hl-8">&gt;</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">div</span><span class="hl-8">&gt;</span>
</code></pre>
<p>You can specify inline styles with the <code>css()</code> method:</p>
<pre><code class="language-typescript"><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-0">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">text</span><span class="hl-1">(</span><span class="hl-6">&quot;This is centered&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">        .</span><span class="hl-5">css</span><span class="hl-1">({</span><span class="hl-0">textAlign:</span><span class="hl-1"> </span><span class="hl-6">&#39;center&#39;</span><span class="hl-1">})</span><br/><span class="hl-1">}</span>
</code></pre>
<p>will generate:</p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">div</span><span class="hl-1"> </span><span class="hl-10">style</span><span class="hl-1">=</span><span class="hl-11">&#39;text-align: center&#39;</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    This is centered</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">div</span><span class="hl-8">&gt;</span>
</code></pre>
<p>Since the <code>render()</code> method is plain Typescript, it can incorporate arbitrary control flow and logic:</p>
<pre><code class="language-typescript"><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-0">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-12">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-0">s</span><span class="hl-1"> </span><span class="hl-2">in</span><span class="hl-1"> [</span><span class="hl-6">&#39;Foo&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Bar&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Baz&#39;</span><span class="hl-1">]) {</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">a</span><span class="hl-1">({</span><span class="hl-0">href:</span><span class="hl-1"> </span><span class="hl-6">`/page/</span><span class="hl-2">${</span><span class="hl-0">s</span><span class="hl-7">.</span><span class="hl-5">toLowerCase</span><span class="hl-7">()</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-0">s</span><span class="hl-1">})</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-12">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">count</span><span class="hl-1"> &gt; </span><span class="hl-13">4</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">({</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;Count is greater than 4&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#init-and-load" id="init-and-load" style="color: inherit; text-decoration: none;">
  <h3>Init and Load</h3>
</a>
<p>Parts can define an <code>init()</code> method that will get called once before the first <code>render()</code> call.
You can also define a <code>load()</code> method that will get called after <code>init()</code> but before <code>render()</code>.</p>
<pre><code class="language-typescript"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Counter</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">CounterState</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// this is guaranteed to be called only once,</span><br/><span class="hl-1">    </span><span class="hl-4">// before the render() method is called for the first time</span><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// this will get called after init() and before the first render()</span><br/><span class="hl-1">    </span><span class="hl-4">// it may be called more than once if the root part is reloaded</span><br/><span class="hl-1">    </span><span class="hl-5">load</span><span class="hl-1">() {</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">// this will get called at least once, but possibly many</span><br/><span class="hl-1">    </span><span class="hl-4">// times as the UI is updated</span><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<p>The difference between <code>init()</code> and <code>load()</code> is that <code>load()</code> may be called multiple times (when the user navigates, see <a href="#routing-and-navigation">Routing and Navigation</a>), whereas <code>init()</code> is guaranteed to only ever be called once.</p>
<p><code>init()</code> is also <code>async</code> since it may need to perform some IO while initializing and the part&#39;s <code>isInitialized</code> will not get set until after it&#39;s complete.</p>

<a href="#update" id="update" style="color: inherit; text-decoration: none;">
  <h3>Update</h3>
</a>
<p>Each time a Part is actually rendered to the DOM, the <code>update()</code> method will get called and passed the corresponding DOM element.
The <code>update()</code> method may also get called when a part is marked as <code>stale</code>. </p>
<p>This is useful for executing code that depends on the DOM itself, needs to be called whenever the part&#39;s DOM element changes, and possibly more often (e.g. rendering a canvas element based on user input).</p>
<pre><code class="language-typescript"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Counter</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">CounterState</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-1">    </span><span class="hl-0">fooKey</span><span class="hl-1"> = </span><span class="hl-0">messages</span><span class="hl-1">.</span><span class="hl-5">untypedKey</span><span class="hl-1">()</span><br/><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onClick</span><span class="hl-1">(</span><span class="hl-0">m</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">stale</span><span class="hl-1">() </span><span class="hl-4">// don&#39;t force a re-render, only update</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">class</span><span class="hl-1">(</span><span class="hl-6">&#39;foo&#39;</span><span class="hl-1">).</span><span class="hl-5">a</span><span class="hl-1">().</span><span class="hl-5">emitClick</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">fooKey</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// elem will be the .foo element created by the render() method</span><br/><span class="hl-1">    </span><span class="hl-5">update</span><span class="hl-1">(</span><span class="hl-0">elem</span><span class="hl-1">: </span><span class="hl-3">HTMLElement</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// this gets called once for every call of render()</span><br/><span class="hl-1">        </span><span class="hl-4">// as well as any time the anchor is clicked</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span>
</code></pre>

<a href="#mounting" id="mounting" style="color: inherit; text-decoration: none;">
  <h3>Mounting</h3>
</a>
<p>The <code>Part.mount()</code> method is used to attach parts to the DOM.
It accepts either a DOM element or an id string as the mount point and an instance of the part&#39;s state:</p>
<pre><code class="language-typescript"><span class="hl-4">// mounts to the element with id &#39;container&#39;:</span><br/><span class="hl-0">Part</span><span class="hl-1">.</span><span class="hl-5">mount</span><span class="hl-1">(</span><span class="hl-0">Counter</span><span class="hl-1">, </span><span class="hl-6">&#39;container&#39;</span><span class="hl-1">, {</span><span class="hl-0">count:</span><span class="hl-1"> </span><span class="hl-13">0</span><span class="hl-1">})</span><br/><br/><span class="hl-4">// which is the same as:</span><br/><span class="hl-0">Part</span><span class="hl-1">.</span><span class="hl-5">mount</span><span class="hl-1">(</span><span class="hl-0">Counter</span><span class="hl-1">, </span><span class="hl-0">document</span><span class="hl-1">.</span><span class="hl-5">getElementById</span><span class="hl-1">(</span><span class="hl-6">&#39;container&#39;</span><span class="hl-1">)!, {</span><span class="hl-0">count:</span><span class="hl-1"> </span><span class="hl-13">0</span><span class="hl-1">})</span>
</code></pre>
<p>Optionally, you can choose to <em>capture</em> a base path when mounting a part. 
This means Tuff will prevent any navigation to a part starting with that base path by the browser and instead 
push the path to the browser history and reload the mounted Part.</p>
<pre><code class="language-typescript"><span class="hl-4">// mounts the part and captures any navigation to /path or any of its subpaths</span><br/><span class="hl-0">Part</span><span class="hl-1">.</span><span class="hl-5">mount</span><span class="hl-1">(</span><span class="hl-0">RootPart</span><span class="hl-1">, </span><span class="hl-6">&#39;container&#39;</span><span class="hl-1">, {}, {</span><span class="hl-0">capturePath:</span><span class="hl-1"> </span><span class="hl-6">&#39;/path&#39;</span><span class="hl-1">})</span>
</code></pre>
<p>Path capture is useful for client-side routing. 
See the <a href="#routing-and-navigation">Routing and Navigation</a> section.</p>

<a href="#child-parts" id="child-parts" style="color: inherit; text-decoration: none;">
  <h3>Child Parts</h3>
</a>
<p>Each part can have nested <em>child</em> parts such that the UI is composed of an arbitrary tree of parts. Child parts are created by the parent calling <code>makePart</code> (usually in the <code>init()</code> method) and are rendered to the UI with the <code>part</code> method on a DOM element in the <code>render()</code> method:</p>
<pre><code class="language-typescript"><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">ButtonState</span><span class="hl-1"> = {</span><span class="hl-0">text</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">}</span><br/><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Button</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">ButtonState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">a</span><span class="hl-1">(</span><span class="hl-6">&quot;.button&quot;</span><span class="hl-1">, {</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">text</span><span class="hl-1">})</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">ToolbarState</span><span class="hl-1"> = {</span><span class="hl-0">count</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">}</span><br/><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Toolbar</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">ToolbarState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-0">buttons</span><span class="hl-1"> = </span><span class="hl-5">Array</span><span class="hl-1">&lt;</span><span class="hl-3">Button</span><span class="hl-1">&gt;()</span><br/><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-4">// populate the this.buttons array of child parts</span><br/><span class="hl-1">        </span><span class="hl-12">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1">=</span><span class="hl-13">0</span><span class="hl-1">; </span><span class="hl-0">i</span><span class="hl-1">&lt;</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">count</span><span class="hl-1">; </span><span class="hl-0">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">buttons</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">makePart</span><span class="hl-1">(</span><span class="hl-0">Button</span><span class="hl-1">, {</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">`Button </span><span class="hl-2">${</span><span class="hl-0">i</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">})</span><br/><span class="hl-1">            )</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// render the button parts to the parent div</span><br/><span class="hl-1">        </span><span class="hl-12">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-0">button</span><span class="hl-1"> </span><span class="hl-2">of</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">buttons</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">part</span><span class="hl-1">(</span><span class="hl-0">button</span><span class="hl-1">)</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#dirty-tracking" id="dirty-tracking" style="color: inherit; text-decoration: none;">
  <h3>Dirty Tracking</h3>
</a>
<p>Unlike React or other reactive UI libraries, the update of Tuff UIs does not happen automatically when state changes.
Instead, parts must explicitly mark themselves as dirty using the <code>dirty()</code> method when they&#39;re state has changed.</p>
<p>This was a conscious design decision to make the re-paint logic easier to reason about and more predictable. So, instead of knowing if/when a call to e.g. React&#39;s <code>forceUpdate</code> is needed, the updating is always precisely controlled.</p>
<p>When a part calls <code>dirty()</code>, the UI is not rendered immediately.
Instead, an update is scheduled for the next animation frame and only dirty parts are re-rendered. This has several effects:</p>
<ol>
<li>Multiple <code>dirty()</code> calls at the same time will only result in a single render</li>
<li>Rendering happens only during the browser-specified animation frames, so even rapid calls to <code>dirty()</code> will result in smooth UI updates</li>
<li>As longs as the UI is composed of relatively fine-grained parts, updating small parts of the interface will result in only small re-renders, not a global virtual DOM diff</li>
</ol>

<a href="#routing-and-navigation" id="routing-and-navigation" style="color: inherit; text-decoration: none;">
  <h3>Routing and Navigation</h3>
</a>
<p>Tuff supports typesafe client client-side using the <a href="https://github.com/kruschid/typesafe-routes">Typesafe Routes</a> library.</p>
<p>Routes are declared as a constant composed of calls to <code>partRoute()</code> and <code>redirectRoute()</code>:</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-14">routes</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">root:</span><span class="hl-1"> </span><span class="hl-5">partRoute</span><span class="hl-1">(</span><span class="hl-0">RootPart</span><span class="hl-1">, </span><span class="hl-6">&#39;/&#39;</span><span class="hl-1">, {}),</span><br/><span class="hl-1">    </span><span class="hl-0">fooList:</span><span class="hl-1"> </span><span class="hl-5">partRoute</span><span class="hl-1">(</span><span class="hl-0">FooListPart</span><span class="hl-1">, </span><span class="hl-6">&#39;/foos&#39;</span><span class="hl-1">, {}).</span><br/><span class="hl-1">    </span><span class="hl-0">fooShow</span><span class="hl-1">: </span><span class="hl-5">partRoute</span><span class="hl-1">(</span><span class="hl-0">FooShowPart</span><span class="hl-1">, </span><span class="hl-6">&#39;/foos/:id&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">        </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-0">stringParser</span><br/><span class="hl-1">    }),</span><br/><span class="hl-1">    </span><span class="hl-0">bar:</span><span class="hl-1"> </span><span class="hl-5">redirectRoute</span><span class="hl-1">(</span><span class="hl-6">&#39;/bar&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;/foos&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">}</span>
</code></pre>
<p><code>partRoute</code> routes a particular path to the given part.
If the part&#39;s state type is non-empty, the route must match each property with a parser (i.e. <code>stringParser</code>).
These properties are strongl-typed and matched to the part&#39;s state type at compile time.
See the <a href="https://github.com/kruschid/typesafe-routes">Typesafe Routes documentation</a> for more details about parsers.</p>
<p><code>redirectRoute</code> simply redirects one path to another. </p>

<a href="#routers" id="routers" style="color: inherit; text-decoration: none;">
  <h4>Routers</h4>
</a>
<p>To actually <em>use</em> a set of routes, you must create a subclass of <code>RouterPart</code>:</p>
<pre><code class="language-typescript"><span class="hl-12">export</span><span class="hl-1"> </span><span class="hl-0">MyRouter</span><span class="hl-1"> </span><span class="hl-0">extends</span><span class="hl-1"> </span><span class="hl-0">RouterPart</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">get</span><span class="hl-1"> </span><span class="hl-0">routes</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-0">routes</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">get</span><span class="hl-1"> </span><span class="hl-5">defaultPart</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-12">return</span><span class="hl-1"> </span><span class="hl-0">UnknownPathPart</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-0">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">div</span><span class="hl-1">(</span><span class="hl-6">&#39;.child&#39;</span><span class="hl-1">, </span><span class="hl-0">child</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">child</span><span class="hl-1">)</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>A router needs to implement <code>routes</code> and <code>defaultPart</code> to specify the routes structure and default <code>Part</code> class if the current route is not found, respecitely. 
In the <code>render()</code> method, it must call <code>super.render()</code> and pass the tag in which the matched part will be rendered.</p>
<p>Tuff routers have some special properties that aren&#39;t present many other frameworks:</p>
<ol>
<li>Routers do <em>not</em> need to be the root (mounted) part</li>
<li>You can have <em>more than one router</em> as children (or grandchildren, etc.) of the root part</li>
<li>The router&#39;s <code>render()</code> method can call <code>super.render()</code> at an arbitrary point in its render tree, acting like a layout</li>
</ol>
<p>Combined, these properties allow the Tuff routing system to break free from the traditional one-router/one-layout paradigm and enable composable, dynamic UIs that still leverage traditional URL-based routing.</p>

<a href="#navigation" id="navigation" style="color: inherit; text-decoration: none;">
  <h3>Navigation</h3>
</a>
<p>When a part is mounted with path capture (see <a href="#mounting">Mounting</a>), all anchor tag clicks are intercepted and the mounted part is reloaded instead of the native browser navigation occurring.</p>
<p>You can also programmatically navigate to a different URL using <code>Nav.visit()</code>:</p>
<pre><code class="language-typescript"><span class="hl-0">Part</span><span class="hl-1">.</span><span class="hl-5">mount</span><span class="hl-1">(</span><span class="hl-0">RootPart</span><span class="hl-1">, </span><span class="hl-6">&#39;container&#39;</span><span class="hl-1">, {}, {</span><span class="hl-0">capturePath:</span><span class="hl-1"> </span><span class="hl-6">&#39;/root&#39;</span><span class="hl-1">})</span><br/><br/><span class="hl-4">// will update the URL bar to /root/foos/123 and reload the mounted part without actually reloading the page</span><br/><span class="hl-0">Nav</span><span class="hl-1">.</span><span class="hl-5">visit</span><span class="hl-1">(</span><span class="hl-6">&quot;/root/foos/123&quot;</span><span class="hl-1">)</span><br/><br/><span class="hl-4">// will perform the native navigation to /other since that&#39;s outside of the mounted path</span><br/><span class="hl-0">Nav</span><span class="hl-1">.</span><span class="hl-5">visit</span><span class="hl-1">(</span><span class="hl-6">&quot;/other&quot;</span><span class="hl-1">)</span>
</code></pre>

<a href="#messages" id="messages" style="color: inherit; text-decoration: none;">
  <h3>Messages</h3>
</a>
<p>Instead of traditional DOM event handlers, events in Tuff are handled through a custom <em>messages</em> system. It is necessary due to the detached nature of the declarative UI and the actual DOM manipulation, but also offers some advantages over traditional event handlers:</p>
<ol>
<li>The ability to passively handle messages that happen outside of a part&#39;s particular branch of the DOM tree</li>
<li>Easily attach multiple message keys to the same element and multiple handlers for the same message key</li>
<li>Use a single handler for messages emitted from many different elements down the DOM tree (similar to jQuery&#39;s <code>.on()</code>)</li>
<li>Decouple the emitting and handling of messages while leveraging the type system for correctness (message keys are statically typed and don&#39;t rely on strings)</li>
<li>Force message emitters to pass strongly-typed data, which handlers can then receive</li>
</ol>
<p>Messages are identified by <em>keys</em> (instead of e.g. strings) to allow the type system to force correctness and avoid typos.
New message keys are created with the <code>messages.untypedKey()</code> and <code>messages.typedKey&lt;T&gt;()</code> functions and are used to declare which messages are emitted from a particular element:</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-14">FooKey</span><span class="hl-1"> = </span><span class="hl-0">messages</span><span class="hl-1">.</span><span class="hl-5">untypedKey</span><span class="hl-1">()</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-14">type</span><span class="hl-1"> BarData = {</span><br/><span class="hl-1">    </span><span class="hl-0">value:</span><span class="hl-1"> </span><span class="hl-0">number</span><br/><span class="hl-1">}</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-14">BarKey</span><span class="hl-1"> = </span><span class="hl-0">messages</span><span class="hl-1">.</span><span class="hl-5">typedKey</span><span class="hl-1">&lt;</span><span class="hl-3">BarData</span><span class="hl-1">&gt;()</span><br/><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Button</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">ButtonState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">// .emitClick(key) is a shortcut for .emit(&quot;click&quot;, key)</span><br/><span class="hl-1">        </span><span class="hl-4">// passing a typed key forces you to also pass that type</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">a</span><span class="hl-1">(</span><span class="hl-6">&quot;.button&quot;</span><span class="hl-1">, {</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">text</span><span class="hl-1">})</span><br/><span class="hl-1">            .</span><span class="hl-5">emitClick</span><span class="hl-1">(</span><span class="hl-0">FooKey</span><span class="hl-1">)</span><br/><span class="hl-1">            .</span><span class="hl-5">emitClick</span><span class="hl-1">(</span><span class="hl-0">BarKey</span><span class="hl-1">, {</span><span class="hl-0">value:</span><span class="hl-1"> </span><span class="hl-13">42</span><span class="hl-1">})</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Then, either the same part or another part in the tree can declare that it will handle the message:</p>
<pre><code class="language-typescript"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Toolbar</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">ToolbarState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-4">// .onClick(key, ...) is a shortcut for .handle(&quot;click&quot;, key, ...)</span><br/><span class="hl-1">        </span><span class="hl-4">// the message argument contains:</span><br/><span class="hl-1">        </span><span class="hl-4">//  type: the string event type (&quot;click&quot;)</span><br/><span class="hl-1">        </span><span class="hl-4">//  event: the raw Event</span><br/><span class="hl-1">        </span><span class="hl-4">//  data: the data passed if the key is typed</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onClick</span><span class="hl-1">(</span><span class="hl-0">FooKey</span><span class="hl-1">, </span><span class="hl-0">message</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">foo</span><span class="hl-1"> = </span><span class="hl-6">&#39;bar&#39;</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">dirty</span><span class="hl-1">()</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onClick</span><span class="hl-1">(</span><span class="hl-0">BarKey</span><span class="hl-1">, </span><span class="hl-0">message</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Bar clicked with value </span><span class="hl-2">${</span><span class="hl-0">message</span><span class="hl-7">.</span><span class="hl-0">data</span><span class="hl-7">.</span><span class="hl-0">value</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">)</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Parts that are not in the same branch of the DOM/Part tree can listen for messages as well with the &quot;passive&quot; argument:</p>
<pre><code class="language-typescript"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">OtherPart</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;</span><span class="hl-3">OtherState</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-4">// this part will handle the FooKey message even though</span><br/><span class="hl-1">        </span><span class="hl-4">// it&#39;s not a parent of the emitting Button parts</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onClick</span><span class="hl-1">(</span><span class="hl-0">FooKey</span><span class="hl-1">, </span><span class="hl-0">m</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">state</span><span class="hl-1">.</span><span class="hl-0">numClicked</span><span class="hl-1"> += </span><span class="hl-13">1</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">dirty</span><span class="hl-1">()</span><br/><span class="hl-1">        }, </span><span class="hl-6">&quot;passive&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#global-keyboard-events" id="global-keyboard-events" style="color: inherit; text-decoration: none;">
  <h3>Global Keyboard Events</h3>
</a>
<p>Unlike mouse and focus events, general keyboard presses bubble directly to the document (unless they&#39;re handled by a form input or contenteditable element).
Additionally, the &quot;keypress&quot; event is deprecated in modern Javascript. </p>
<p>Therefore, Tuff overrides the &quot;keypress&quot; event to to actually handle global keydown events. 
This provides a mechanism for any <em>Part</em> to handle global key press events in the same way that other, local events are handled.</p>
<p>In order to ease cross-platform development, special message keys (<em>KeyPress</em> objects) are constructed for the global key press events.
Each <em>KeyPress</em> takes the key being pressed as well as zero or more <em>KeyModifiers</em> that specify the modifier keys in a platform-indepependent manner.</p>
<p>For example, the &quot;control/command&quot; modifier maps to the Command key on macOS and the Control key on other platforms:</p>
<pre><code class="language-typescript"><span class="hl-0">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onKeyPress</span><span class="hl-1">(</span><span class="hl-0">messages</span><span class="hl-1">.</span><span class="hl-5">keyPress</span><span class="hl-1">(</span><span class="hl-6">&quot;z&quot;</span><span class="hl-1">, </span><span class="hl-6">&quot;control/command&quot;</span><span class="hl-1">), </span><span class="hl-0">m</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">// this gets called when command+z is pressed on macOS </span><br/><span class="hl-1">        </span><span class="hl-4">// and control+z if called on Windows and Linux</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#logging" id="logging" style="color: inherit; text-decoration: none;">
  <h3>Logging</h3>
</a>
<p>Tuff comes with a very simple logging system that you can optionally use for your application. Simply create a <code>Logger</code> instance with an arbitrary prefix anywhere you&#39;d like (Tuff libraries tend to do it at the top of the file) and call the usual logging methods (<code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>):</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-14">log</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-5">Logger</span><span class="hl-1">(</span><span class="hl-6">&#39;MyThing&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-4">// regular log statements</span><br/><span class="hl-0">log</span><span class="hl-1">.</span><span class="hl-5">info</span><span class="hl-1">(</span><span class="hl-6">&#39;hello&#39;</span><span class="hl-1">)</span><br/><span class="hl-4">// [MyThing] hello</span><br/><br/><span class="hl-4">// console-style extra args</span><br/><span class="hl-0">log</span><span class="hl-1">.</span><span class="hl-5">warn</span><span class="hl-1">(</span><span class="hl-6">&#39;an object&#39;</span><span class="hl-1">, {</span><span class="hl-0">foo:</span><span class="hl-1"> </span><span class="hl-6">&#39;bar&#39;</span><span class="hl-1">})</span><br/><span class="hl-4">// [MyThing] an object</span><br/><span class="hl-4">// {foo: &#39;bar&#39;}</span><br/><br/><span class="hl-4">// log the time it takes to execute a function</span><br/><span class="hl-0">log</span><span class="hl-1">.</span><span class="hl-5">time</span><span class="hl-1">(</span><span class="hl-6">&#39;count things&#39;</span><span class="hl-1">, () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// something that takes time to do</span><br/><span class="hl-1">})</span><br/><span class="hl-4">// [MyThing] count things: 0.312 ms</span><br/><br/><span class="hl-4">// set the global minimum log level to filter output</span><br/><span class="hl-4">// (default is &#39;info&#39;)</span><br/><span class="hl-0">Logger</span><span class="hl-1">.</span><span class="hl-0">level</span><span class="hl-1"> = </span><span class="hl-6">&#39;warn&#39;</span><br/><span class="hl-0">log</span><span class="hl-1">.</span><span class="hl-5">info</span><span class="hl-1">(</span><span class="hl-6">&#39;too much info&#39;</span><span class="hl-1">)</span><br/><span class="hl-4">// (won&#39;t print anything)</span><br/>
</code></pre>

<a href="#forms" id="forms" style="color: inherit; text-decoration: none;">
  <h3>Forms</h3>
</a>
<p>Tuff provides a special <code>Part</code> class, <code>FormPart</code>, which provides special methods to generate HTML form elements that are bound directly the properties of its data type.</p>
<p>Simply extend <code>FormPart</code> with your form-specific data type and then declare the form fields in the <code>render()</code> method with helpers like <code>textInput()</code>, <code>dateInput</code>, <code>radio</code>, and <code>checkbox</code>:</p>
<pre><code class="language-typescript"><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-3">MyFormData</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">text</span><span class="hl-1">: </span><span class="hl-3">string</span><br/><span class="hl-1">    </span><span class="hl-0">date</span><span class="hl-1">: </span><span class="hl-3">string</span><br/><span class="hl-1">    </span><span class="hl-0">either</span><span class="hl-1">: </span><span class="hl-6">&quot;a&quot;</span><span class="hl-1"> | </span><span class="hl-6">&quot;b&quot;</span><br/><span class="hl-1">    </span><span class="hl-0">isChecked</span><span class="hl-1">: </span><span class="hl-3">boolean</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">MyFormPart</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FormPart</span><span class="hl-1">&lt;</span><span class="hl-3">MyFormData</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-1">    </span><span class="hl-5">render</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">: </span><span class="hl-3">PartTag</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">textInput</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">, </span><span class="hl-6">&quot;text&quot;</span><span class="hl-1">, {</span><span class="hl-0">placeholder:</span><span class="hl-1"> </span><span class="hl-6">&quot;Enter Text Here&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">dateInput</span><span class="hl-1">(</span><span class="hl-0">parent</span><span class="hl-1">, </span><span class="hl-6">&quot;date&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">label</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">radio</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1">, </span><span class="hl-6">&quot;either&quot;</span><span class="hl-1">, </span><span class="hl-6">&quot;a&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-0">label</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">({</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;A&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">label</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">radio</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1">, </span><span class="hl-6">&quot;either&quot;</span><span class="hl-1">, </span><span class="hl-6">&quot;b&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-0">label</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">({</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;B&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">        </span><span class="hl-0">parent</span><span class="hl-1">.</span><span class="hl-5">label</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">checkbox</span><span class="hl-1">(</span><span class="hl-0">label</span><span class="hl-1">, </span><span class="hl-6">&quot;isChecked&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-0">label</span><span class="hl-1">.</span><span class="hl-5">span</span><span class="hl-1">({</span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;Is Checked?&quot;</span><span class="hl-1">})</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<p>This part will render the given form elements and automatically assign the values from its <code>state</code> to them.</p>
<p>Whenever an input on the form is changed, the <code>shouldUpdateState()</code> method will be called, allowing the part to decide whether or not the new data should override the existing state (default is true if not implemented):</p>
<pre><code class="language-typescript"><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">MyFormPart</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">FormPart</span><span class="hl-1">&lt;</span><span class="hl-3">MyFormData</span><span class="hl-1">&gt; {</span><br/><br/><span class="hl-1">    </span><span class="hl-4">// render() {...}</span><br/><br/><span class="hl-1">    </span><span class="hl-5">shouldUpdateState</span><span class="hl-1">(</span><span class="hl-0">newData</span><span class="hl-1">: </span><span class="hl-3">DataType</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-12">if</span><span class="hl-1"> (</span><span class="hl-0">newData</span><span class="hl-1">.</span><span class="hl-0">text</span><span class="hl-1">.</span><span class="hl-0">length</span><span class="hl-1">) { </span><span class="hl-4">// some validation</span><br/><span class="hl-1">            </span><span class="hl-12">return</span><span class="hl-1"> </span><span class="hl-2">true</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-12">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">dirty</span><span class="hl-1">()</span><br/><span class="hl-1">            </span><span class="hl-12">return</span><span class="hl-1"> </span><span class="hl-2">false</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<p>This is a good place to perform validation and possibly return false and mark the part as dirty - forcing it to re-render.</p>
<p>If <code>shouldUpdateState()</code> returns true, the new data is then emitted as a <code>&quot;datachange&quot;</code> event that other parts in the tree can handle. The event is keyed with a <code>TypedKey</code> called <code>dataChangeKey</code> specific to the part:</p>
<pre><code class="language-typescript"><br/><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">ParentPart</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Part</span><span class="hl-1">&lt;{}&gt; {</span><br/><br/><span class="hl-1">    </span><span class="hl-0">myForm</span><span class="hl-1">!: </span><span class="hl-3">MyFormPart</span><br/><br/><span class="hl-1">    </span><span class="hl-2">async</span><span class="hl-1"> </span><span class="hl-5">init</span><span class="hl-1">() {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">myForm</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">makePart</span><span class="hl-1">(</span><span class="hl-0">MyFormPart</span><span class="hl-1">, {</span><br/><span class="hl-1">            </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-6">&quot;New Form&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">date:</span><span class="hl-1"> </span><span class="hl-6">&quot;2022-01-01&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">either:</span><span class="hl-1"> </span><span class="hl-6">&quot;a&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">isChecked:</span><span class="hl-1"> </span><span class="hl-2">false</span><br/><span class="hl-1">        })</span><br/><br/><span class="hl-1">        </span><span class="hl-4">// this will get called whenever the form part&#39;s data changes</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-5">onDataChanged</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-0">myForm</span><span class="hl-1">.</span><span class="hl-0">dataChangeKey</span><span class="hl-1">, </span><span class="hl-0">m</span><span class="hl-1"> </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">// m.data has type MyFormData</span><br/><span class="hl-1">            </span><span class="hl-0">log</span><span class="hl-1">.</span><span class="hl-5">info</span><span class="hl-1">(</span><span class="hl-6">`My form data changed with text=</span><span class="hl-2">${</span><span class="hl-0">m</span><span class="hl-7">.</span><span class="hl-0">data</span><span class="hl-7">.</span><span class="hl-0">text</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, </span><span class="hl-0">m</span><span class="hl-1">)</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">}</span><br/>
</code></pre>

<a href="#development" id="development" style="color: inherit; text-decoration: none;">
  <h2>Development</h2>
</a>
<p>To run the demo application, clone this repository and run:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span>
</code></pre>
<p>then:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">dev</span>
</code></pre>
<p>to start the development server, which will serve the demo application at <a href="http://localhost:3000/">http://localhost:3000/</a>.</p>

<a href="#source-generation" id="source-generation" style="color: inherit; text-decoration: none;">
  <h3>Source Generation</h3>
</a>
<p>Tuff parses the Typescript DOM type definitions to programmatically generate the tag and event handling code.
In the event that such code needs to be regenerated, run:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">gen</span>
</code></pre>

<a href="#publishing" id="publishing" style="color: inherit; text-decoration: none;">
  <h3>Publishing</h3>
</a>
<p>Due to reasons that I cannot fathom, <code>npm publish</code> doesn&#39;t seem to support publishing just the <code>dist</code> directory in a reasonable way.
So, we use a custom script instead:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">pub</span>
</code></pre>

<a href="#license-mit" id="license-mit" style="color: inherit; text-decoration: none;">
  <h2>License (MIT)</h2>
</a>
<p>&copy; 2022 <a href="https://terrier.tech">Terrier Technologies LLC</a></p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">Tuff</a>
<ul>
<li class="tsd-kind-namespace"><a href="modules/arrays.html">arrays</a></li>
<li class="tsd-kind-namespace"><a href="modules/box.html">box</a></li>
<li class="tsd-kind-namespace"><a href="modules/forms.html">forms</a></li>
<li class="tsd-kind-namespace"><a href="modules/html.html">html</a></li>
<li class="tsd-kind-namespace"><a href="modules/keyboard.html">keyboard</a></li>
<li class="tsd-kind-namespace"><a href="modules/messages.html">messages</a></li>
<li class="tsd-kind-namespace"><a href="modules/nav.html">nav</a></li>
<li class="tsd-kind-namespace"><a href="modules/objects.html">objects</a></li>
<li class="tsd-kind-namespace"><a href="modules/parts.html">parts</a></li>
<li class="tsd-kind-namespace"><a href="modules/routing.html">routing</a></li>
<li class="tsd-kind-namespace"><a href="modules/sets.html">sets</a></li>
<li class="tsd-kind-namespace"><a href="modules/strings.html">strings</a></li>
<li class="tsd-kind-namespace"><a href="modules/svg.html">svg</a></li>
<li class="tsd-kind-namespace"><a href="modules/tags.html">tags</a></li>
<li class="tsd-kind-namespace"><a href="modules/urls.html">urls</a></li>
<li class="tsd-kind-namespace"><a href="modules/vec.html">vec</a></li></ul></li></ul></div></details></nav>
<nav class="tsd-navigation secondary menu-sticky"></nav></div></div>
<div class="container tsd-generator">
<p style="line-height: 28px;">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a><br><span id="generation-date"></span><script>window.GENERATION_DATE=1665864833411;document.getElementById('generation-date').innerText=new Intl.DateTimeFormat(navigator.language, {dateStyle: 'medium'}).format(window.GENERATION_DATE)</script></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>